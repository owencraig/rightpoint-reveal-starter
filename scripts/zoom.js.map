{"version":3,"names":[],"mappings":"","sources":["zoom.js"],"sourcesContent":["// Custom reveal.js integration\n(function(){\n\tvar isEnabled = true;\n\n\tdocument.querySelector( '.reveal .slides' ).addEventListener( 'mousedown', function( event ) {\n\t\tvar modifier = ( Reveal.getConfig().zoomKey ? Reveal.getConfig().zoomKey : 'alt' ) + 'Key';\n\n\t\tvar zoomPadding = 20;\n\t\tvar revealScale = Reveal.getScale();\n\n\t\tif( event[ modifier ] && isEnabled ) {\n\t\t\tevent.preventDefault();\n\n\t\t\tvar bounds = event.target.getBoundingClientRect();\n\n\t\t\tzoom.to({\n\t\t\t\tx: ( bounds.left * revealScale ) - zoomPadding,\n\t\t\t\ty: ( bounds.top * revealScale ) - zoomPadding,\n\t\t\t\twidth: ( bounds.width * revealScale ) + ( zoomPadding * 2 ),\n\t\t\t\theight: ( bounds.height * revealScale ) + ( zoomPadding * 2 ),\n\t\t\t\tpan: false\n\t\t\t});\n\t\t}\n\t} );\n\n\tReveal.addEventListener( 'overviewshown', function() { isEnabled = false; } );\n\tReveal.addEventListener( 'overviewhidden', function() { isEnabled = true; } );\n})();\n\n/*!\n * zoom.js 0.3 (modified for use with reveal.js)\n * http://lab.hakim.se/zoom-js\n * MIT licensed\n *\n * Copyright (C) 2011-2014 Hakim El Hattab, http://hakim.se\n */\nvar zoom = (function(){\n\n\t// The current zoom level (scale)\n\tvar level = 1;\n\n\t// The current mouse position, used for panning\n\tvar mouseX = 0,\n\t\tmouseY = 0;\n\n\t// Timeout before pan is activated\n\tvar panEngageTimeout = -1,\n\t\tpanUpdateInterval = -1;\n\n\t// Check for transform support so that we can fallback otherwise\n\tvar supportsTransforms = \t'WebkitTransform' in document.body.style ||\n\t\t\t\t\t\t\t\t'MozTransform' in document.body.style ||\n\t\t\t\t\t\t\t\t'msTransform' in document.body.style ||\n\t\t\t\t\t\t\t\t'OTransform' in document.body.style ||\n\t\t\t\t\t\t\t\t'transform' in document.body.style;\n\n\tif( supportsTransforms ) {\n\t\t// The easing that will be applied when we zoom in/out\n\t\tdocument.body.style.transition = 'transform 0.8s ease';\n\t\tdocument.body.style.OTransition = '-o-transform 0.8s ease';\n\t\tdocument.body.style.msTransition = '-ms-transform 0.8s ease';\n\t\tdocument.body.style.MozTransition = '-moz-transform 0.8s ease';\n\t\tdocument.body.style.WebkitTransition = '-webkit-transform 0.8s ease';\n\t}\n\n\t// Zoom out if the user hits escape\n\tdocument.addEventListener( 'keyup', function( event ) {\n\t\tif( level !== 1 && event.keyCode === 27 ) {\n\t\t\tzoom.out();\n\t\t}\n\t} );\n\n\t// Monitor mouse movement for panning\n\tdocument.addEventListener( 'mousemove', function( event ) {\n\t\tif( level !== 1 ) {\n\t\t\tmouseX = event.clientX;\n\t\t\tmouseY = event.clientY;\n\t\t}\n\t} );\n\n\t/**\n\t * Applies the CSS required to zoom in, prefers the use of CSS3\n\t * transforms but falls back on zoom for IE.\n\t *\n\t * @param {Object} rect\n\t * @param {Number} scale\n\t */\n\tfunction magnify( rect, scale ) {\n\n\t\tvar scrollOffset = getScrollOffset();\n\n\t\t// Ensure a width/height is set\n\t\trect.width = rect.width || 1;\n\t\trect.height = rect.height || 1;\n\n\t\t// Center the rect within the zoomed viewport\n\t\trect.x -= ( window.innerWidth - ( rect.width * scale ) ) / 2;\n\t\trect.y -= ( window.innerHeight - ( rect.height * scale ) ) / 2;\n\n\t\tif( supportsTransforms ) {\n\t\t\t// Reset\n\t\t\tif( scale === 1 ) {\n\t\t\t\tdocument.body.style.transform = '';\n\t\t\t\tdocument.body.style.OTransform = '';\n\t\t\t\tdocument.body.style.msTransform = '';\n\t\t\t\tdocument.body.style.MozTransform = '';\n\t\t\t\tdocument.body.style.WebkitTransform = '';\n\t\t\t}\n\t\t\t// Scale\n\t\t\telse {\n\t\t\t\tvar origin = scrollOffset.x +'px '+ scrollOffset.y +'px',\n\t\t\t\t\ttransform = 'translate('+ -rect.x +'px,'+ -rect.y +'px) scale('+ scale +')';\n\n\t\t\t\tdocument.body.style.transformOrigin = origin;\n\t\t\t\tdocument.body.style.OTransformOrigin = origin;\n\t\t\t\tdocument.body.style.msTransformOrigin = origin;\n\t\t\t\tdocument.body.style.MozTransformOrigin = origin;\n\t\t\t\tdocument.body.style.WebkitTransformOrigin = origin;\n\n\t\t\t\tdocument.body.style.transform = transform;\n\t\t\t\tdocument.body.style.OTransform = transform;\n\t\t\t\tdocument.body.style.msTransform = transform;\n\t\t\t\tdocument.body.style.MozTransform = transform;\n\t\t\t\tdocument.body.style.WebkitTransform = transform;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Reset\n\t\t\tif( scale === 1 ) {\n\t\t\t\tdocument.body.style.position = '';\n\t\t\t\tdocument.body.style.left = '';\n\t\t\t\tdocument.body.style.top = '';\n\t\t\t\tdocument.body.style.width = '';\n\t\t\t\tdocument.body.style.height = '';\n\t\t\t\tdocument.body.style.zoom = '';\n\t\t\t}\n\t\t\t// Scale\n\t\t\telse {\n\t\t\t\tdocument.body.style.position = 'relative';\n\t\t\t\tdocument.body.style.left = ( - ( scrollOffset.x + rect.x ) / scale ) + 'px';\n\t\t\t\tdocument.body.style.top = ( - ( scrollOffset.y + rect.y ) / scale ) + 'px';\n\t\t\t\tdocument.body.style.width = ( scale * 100 ) + '%';\n\t\t\t\tdocument.body.style.height = ( scale * 100 ) + '%';\n\t\t\t\tdocument.body.style.zoom = scale;\n\t\t\t}\n\t\t}\n\n\t\tlevel = scale;\n\n\t\tif( document.documentElement.classList ) {\n\t\t\tif( level !== 1 ) {\n\t\t\t\tdocument.documentElement.classList.add( 'zoomed' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdocument.documentElement.classList.remove( 'zoomed' );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Pan the document when the mosue cursor approaches the edges\n\t * of the window.\n\t */\n\tfunction pan() {\n\t\tvar range = 0.12,\n\t\t\trangeX = window.innerWidth * range,\n\t\t\trangeY = window.innerHeight * range,\n\t\t\tscrollOffset = getScrollOffset();\n\n\t\t// Up\n\t\tif( mouseY < rangeY ) {\n\t\t\twindow.scroll( scrollOffset.x, scrollOffset.y - ( 1 - ( mouseY / rangeY ) ) * ( 14 / level ) );\n\t\t}\n\t\t// Down\n\t\telse if( mouseY > window.innerHeight - rangeY ) {\n\t\t\twindow.scroll( scrollOffset.x, scrollOffset.y + ( 1 - ( window.innerHeight - mouseY ) / rangeY ) * ( 14 / level ) );\n\t\t}\n\n\t\t// Left\n\t\tif( mouseX < rangeX ) {\n\t\t\twindow.scroll( scrollOffset.x - ( 1 - ( mouseX / rangeX ) ) * ( 14 / level ), scrollOffset.y );\n\t\t}\n\t\t// Right\n\t\telse if( mouseX > window.innerWidth - rangeX ) {\n\t\t\twindow.scroll( scrollOffset.x + ( 1 - ( window.innerWidth - mouseX ) / rangeX ) * ( 14 / level ), scrollOffset.y );\n\t\t}\n\t}\n\n\tfunction getScrollOffset() {\n\t\treturn {\n\t\t\tx: window.scrollX !== undefined ? window.scrollX : window.pageXOffset,\n\t\t\ty: window.scrollY !== undefined ? window.scrollY : window.pageYOffset\n\t\t}\n\t}\n\n\treturn {\n\t\t/**\n\t\t * Zooms in on either a rectangle or HTML element.\n\t\t *\n\t\t * @param {Object} options\n\t\t *   - element: HTML element to zoom in on\n\t\t *   OR\n\t\t *   - x/y: coordinates in non-transformed space to zoom in on\n\t\t *   - width/height: the portion of the screen to zoom in on\n\t\t *   - scale: can be used instead of width/height to explicitly set scale\n\t\t */\n\t\tto: function( options ) {\n\n\t\t\t// Due to an implementation limitation we can't zoom in\n\t\t\t// to another element without zooming out first\n\t\t\tif( level !== 1 ) {\n\t\t\t\tzoom.out();\n\t\t\t}\n\t\t\telse {\n\t\t\t\toptions.x = options.x || 0;\n\t\t\t\toptions.y = options.y || 0;\n\n\t\t\t\t// If an element is set, that takes precedence\n\t\t\t\tif( !!options.element ) {\n\t\t\t\t\t// Space around the zoomed in element to leave on screen\n\t\t\t\t\tvar padding = 20;\n\t\t\t\t\tvar bounds = options.element.getBoundingClientRect();\n\n\t\t\t\t\toptions.x = bounds.left - padding;\n\t\t\t\t\toptions.y = bounds.top - padding;\n\t\t\t\t\toptions.width = bounds.width + ( padding * 2 );\n\t\t\t\t\toptions.height = bounds.height + ( padding * 2 );\n\t\t\t\t}\n\n\t\t\t\t// If width/height values are set, calculate scale from those values\n\t\t\t\tif( options.width !== undefined && options.height !== undefined ) {\n\t\t\t\t\toptions.scale = Math.max( Math.min( window.innerWidth / options.width, window.innerHeight / options.height ), 1 );\n\t\t\t\t}\n\n\t\t\t\tif( options.scale > 1 ) {\n\t\t\t\t\toptions.x *= options.scale;\n\t\t\t\t\toptions.y *= options.scale;\n\n\t\t\t\t\tmagnify( options, options.scale );\n\n\t\t\t\t\tif( options.pan !== false ) {\n\n\t\t\t\t\t\t// Wait with engaging panning as it may conflict with the\n\t\t\t\t\t\t// zoom transition\n\t\t\t\t\t\tpanEngageTimeout = setTimeout( function() {\n\t\t\t\t\t\t\tpanUpdateInterval = setInterval( pan, 1000 / 60 );\n\t\t\t\t\t\t}, 800 );\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Resets the document zoom state to its default.\n\t\t */\n\t\tout: function() {\n\t\t\tclearTimeout( panEngageTimeout );\n\t\t\tclearInterval( panUpdateInterval );\n\n\t\t\tmagnify( { x: 0, y: 0 }, 1 );\n\n\t\t\tlevel = 1;\n\t\t},\n\n\t\t// Alias\n\t\tmagnify: function( options ) { this.to( options ) },\n\t\treset: function() { this.out() },\n\n\t\tzoomLevel: function() {\n\t\t\treturn level;\n\t\t}\n\t}\n\n})();\n\n\n\n"],"file":"zoom.js","sourceRoot":"/source/"}